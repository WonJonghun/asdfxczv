<html class="no-js css-menubar" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
    <meta name="description" content="bootstrap admin template">
    <meta name="author" content="Goback">

    <title></title>
    <!--     Fonts and icons     -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,1,0" />
    <!-- Nucleo Icons -->
    <!-- <link href="css/chart/nucleo-icons.css" rel="stylesheet" />
    <link href="css/chart/nucleo-svg.css" rel="stylesheet" /> -->
    <!-- Font Awesome Icons -->
    <!-- <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
    <link href="css/chart/nucleo-svg.css" rel="stylesheet" /> -->
    <!-- CSS Files -->
    <!-- <link id="pagestyle" href="css/chart/argon-dashboard.css?v=2.0.4" rel="stylesheet" />
    <link rel="stylesheet" href="css/chart/style.css">

    <link rel="stylesheet" href="css/fontello.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="css/design.css">
    <link rel="stylesheet" href="css/sidemenu.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css" /> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/menubar.css">
    <link rel="stylesheet" href="css/page.css">
    <link rel="stylesheet" href="css/site.css">
    <link rel="stylesheet" href="css/component.css">

</head>

<body class="animation">
    <div class="header">
        <div class="logo">
            <img class="brand-logo" src="images/goback_logo.png" alt="">
            <span class="brand-text">GOBACK</span>
        </div>
    </div>
    <div class="site-menubar">
        <div class="site-menubar-body scrollable scrollable-inverse is-enabled scrollable-vertical hoverscorll-disabled"
            style="position: relative;">
            <!-- <div class="scrollable-container" style="height: 646.984px; width: 277px;">
                <div class="scrollable-content" style="width: 260px;"> -->
                    <ul class="site-menu">
                        <li class="site-menu-item">
                            <a href="/">
                                <span class="material-symbols-outlined site-menu-icon">pie_chart</span>
                                <span class="site-menu-title">Overview</span>
                            </a>
                        </li>
                        <li class="site-menu-item open">
                            <a href="/manageStatic">
                                <span class="material-symbols-outlined site-menu-icon">camera</span>
                                <span class="site-menu-title">Manage</span>
                            </a>
                        </li>
                        <li class="site-menu-item">
                            <a href="/staticReport">
                                <span class="material-symbols-outlined site-menu-icon">library_books</span>
                                <span class="site-menu-title">Report</span>
                                <!-- <span class="material-symbols-outlined site-menu-arrow">chevron_right</span> -->
                            </a>
                        </li>
                        <li class="site-menu-item">
                            <a href="/buildingSetting">
                                <span class="material-symbols-outlined site-menu-icon">settings</span>
                                <span class="site-menu-title">Settings</span>
                            </a>
                        </li>
                    </ul>
                <!-- </div>
            </div> -->
            <!-- <div class="scrollable-bar scrollable-bar-vertical scrollable-bar-hide" draggable="false"><div class="scrollable-bar-handle" style="height: 529.364px;"></div></div></div> -->
        </div>
    </div>

    <div class="page">
        <!-- <div class="page-content container-fluid"> -->
        <div class="page-header">
            <h1 class="page-title">Manage</h1>
        </div>
        <div class="page-content">
            <div class="col-12 top-btn-group">
                <a href="/manageStatic" class="btn btn-sm btn-raised btn-primary btn-block">고정형카메라</a>
                <a href="/manageMobile" class="btn btn-sm btn-raised btn-primary btn-outline btn-block">이동형카메라</a>
            </div>

            <div class="row">
                <div class="col-lg-6 col-xxl-6 col-sm-12" style="height: 600px;">
                    <div class="card card-shadow card-responsive">
                        <div class="card-block p-0">
                            <h5 class="p-30 blue-grey-700 text-center m-0 card-title">고정형 카메라 리스트</h5>
                            <div class="px-30 pb-30 col-12"  style="height: 520px; line-height: 60px;">
                                <div style="padding: 60px 10px; height: calc(100% - 60px); overflow: auto;">
                                    <table class="table col-12" id="cam_list">
                                        <thead>
                                            <tr>
                                                <th>No</th>
                                                <th>건물</th>
                                                <th>반</th>
                                                <th>카메라</th>
                                            </tr>
                                        </thead>
                                        <tbody id="tbody"></tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 col-xxl-6 col-sm-12" style="height: 600px;">
                    <div class="card card-shadow card-responsive">
                        <div class="card-block p-0">
                            <h5 class="p-30 blue-grey-700 text-center m-0 card-title">건물을 클릭해주세요.</h5>
                            <div class="px-30 pb-30 col-12"  style="height: 520px; line-height: 60px;">
                                <div style="padding: 60px 10px; height: calc(100% - 60px);">
                                    <div class="col-12 row middle">
                                        <p class="col-2">건물명 : </p>
                                        <div class="col-10">
                                            <select name="" id="input_build" class="manage_select" disabled>
                                                <option value="none">-----------</option>
                                            </select>
                                        </div>                                        
                                    </div>
                                    <div class="col-12 row middle">
                                        <p class="col-2">반명 : </p>
                                        <div class="col-10">
                                            <select name="" id="input_panel" class="manage_select" disabled>
                                                <option value="none">-----------</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-12 row middle">
                                        <p class="col-2">카메라 : </p>
                                        <div class="col-10">
                                            <select name="" id="input_cam" class="manage_select" disabled>
                                                <option value="none">-----------</option>
                                            </select>
                                        </div> 
                                    </div>
                                    <div class="col-12 row middle">
                                        <p class="col-2">IP 주소 : </p>
                                        <div class="col-10"><input type="text" class="form-control round" name="" id="input_ip" readonly></div>                                        
                                    </div>
                                    <input id="input_id" type="hidden">
                                </div>
                                <div class="col-12 text-center">
                                    <button type="button" id="btn_send" class="btn btn-sm btn-raised btn-primary btn-block">데이터전송</button>
                                    <!-- <button type="button" id="btn_update" class="btn btn-sm btn-raised btn-primary btn-block display-none">수정</button>
                                    <button type="button" id="btn_del" class="btn btn-sm btn-raised btn-primary btn-outline btn-block display-none">삭제</button>
                                    <button type="button" id="btn_center" class="btn btn-sm btn-raised btn-primary btn-outline btn-block">중심 좌표 설정</button> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    <script src="/js/jquery.js"></script>
    <!-- <script src="/js/site.js"></script> -->
    <script src="/js/menu.js"></script>
    <script type="text/javascript">       

        $('#btn_send').on('click', function() {
            $.ajax({
                type: "POST",
                url: "manageStatic/send_data",
                async: false,
                success: function (data) {    
                },
                error: function (e) {
                    console.info(e);
                    console.info("Error");
                },
                done: function (e) {
                    console.info("DONE");
                }
            });
        })

        $.ajax({
            type: "POST",
            url: "/get_buildingList",
            async: false,
            dataType: "json",
            success: function (data) {
                if(data.length != 0) {
                    for(var i=0; i<data.length; i++) {
                        $('#input_build').append('<option value="'+data[i]['id']+'">'+data[i]['name']+'</option>')
                    }
                }
            },
            error: function (e) {
                console.info(e);
                console.info("Error");
            },
            done: function (e) {
                console.info("DONE");
            }
        });

        $.ajax({
            type: "POST",
            url: "manageStatic/get_all_panels",
            async: false,
            dataType: "json",
            success: function (data) {
                if(data.length != 0) {
                    for(var i=0; i<data.length; i++) {
                        $('#input_panel').append('<option value="'+data[i]['id']+'">'+data[i]['name']+'</option>')
                    }
                }
            },
            error: function (e) {
                console.info(e);
                console.info("Error");
            },
            done: function (e) {
                console.info("DONE");
            }
        });

        $.ajax({
            type: "POST",
            url: "staticCamSetting/get_camera",
            async: false,
            dataType: "json",
            success: function (data) {
                if(data.length != 0) {
                    for(var i=0; i<data.length; i++) {
                        $('#input_cam').append('<option value="'+data[i]['id']+'">'+data[i]['name']+'</option>')
                    }
                }
            },
            error: function (e) {
                console.info(e);
                console.info("Error");
            },
            done: function (e) {
                console.info("DONE");
            }
        });

        $.ajax({
            type: "POST",
            url: "manageStatic/get_cam_all_info",
            async: false,
            success: function (data) {    
                console.log(data)
                if(data.length != 0) {
                    for(var i=0; i<data.length; i++) {
                        $('#tbody').append(`
                            <tr data-bid=`+data[i]['b_id']+` data-pid=`+data[i]['p_id']+` data-cid=`+data[i]['cam_id']+` onclick="tr_click($(this))">
                                <td>`+(i+1)+`</td>
                                <td style="white-space: nowrap;">`+data[i]['b_name']+`</td>
                                <td>`+data[i]['p_name']+`</td>
                                <td>`+data[i]['cam_name']+`</td>
                            </tr>
                        `)
                    }
                }
            },
            error: function (e) {
                console.info(e);
                console.info("Error");
            },
            done: function (e) {
                console.info("DONE");
            }
        });

        function tr_click(tr){
            $('#input_panel').val(tr.attr('data-pid'));
            $('#input_build').val(tr.attr('data-bid'));
            $('#input_cam').val(tr.attr('data-cid'));
            $('#input_ip').val('192.168.0.17')
        }
    </script>
</body>

</html>